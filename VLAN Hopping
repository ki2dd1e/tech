Атака VLAN Hopping используется для перехода в другие VLAN сети.
Есть 2 типа такой атаки: спуфинг и двойное тегирование.
Тип "Спуфинг" позволяет атакующему инициализировать trunk соединение с коммутатором, что возможно, если интерфейс коммутатора имеет включенный DTP протокол (на Cisco - режим dynamic desirable). Протокол DTP служит для динамического создания trunk соединений между сетевыми устройствами.
Тип "Двойное тегирование" также требует подключения к trunk порту. Злоумышленник тегирует отправляемые пакеты дважды, благодаря чему коммутатор, при получении этого пакета и отправкой на access порт, снимет только 1 тег, а второй оставит нетронутым. Очевидно, снимаемый тег должен быть связан с VLAN атакующего, внутренний - с VLAN жертвы.
Простендируем оба типа атаки. Пусть есть 2 подсети VLAN 1 и VLAN 2, разделенных коммутатором. Злоумышленник находится в VLAN 1, подключенный к Ethernet 0/1 коммутатора и пытается установить связь с хостом из VLAN 2. На данном порте настроен DTP:
```
Switch#show interfaces Ethernet 0/1 switchport
Name: Et0/1
Switchport: Enabled
Administrative Mode: dynamic desirable
Operational Mode: trunk
Administrative Trunking Encapsulation: negotiate
Operational Trunking Encapsulation: dot1q
Negotiation of Trunking: On
```
Изменить его (из интереса к кибербезопасности) можно командой Cisco в конфиге интерфейса: switchport mode dynamic desirable.
Общая схема сети следующая:
![alt text](http://url/to/img.png)
